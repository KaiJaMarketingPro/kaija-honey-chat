name: Env Diff Monitor

on:
  schedule:
    - cron: '0 6 * * *' # t√§glich um 06:00 UTC
  workflow_dispatch:

jobs:
  compare-envs:
    name: Vergleiche .env.production mit Vercel UI
    runs-on: ubuntu-latest

    steps:
      - name: üì• Checkout Repository
        uses: actions/checkout@v3

      - name: üßæ Lese .env.production ein
        id: envfile
        run: |
          echo "ENVFILE<<EOF" >> $GITHUB_ENV
          cat .env.production >> $GITHUB_ENV
          echo "EOF" >> $GITHUB_ENV

      - name: üîê Liste Vercel ENV Variablen
        uses: amondnet/vercel-action@v20
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: '--env'

      - name: ‚ùó Pr√ºfe Differenzen
        run: |
          echo "Vergleich der ENV-Werte erfolgt manuell oder via Audit-Log der Vercel-Konsole. Aktuell kein automatischer Diff-Support per CLI."
