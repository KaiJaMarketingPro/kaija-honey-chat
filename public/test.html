<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>GPT Playground â€“ KaiJa Marketing!</title>
  <style>
    body { font-family: sans-serif; padding: 2em; background: #f5f5f5; }
    select, textarea, button { font-size: 1em; margin: 0.5em 0; width: 100%; }
    #output { white-space: pre-wrap; background: #fff; padding: 1em; border-radius: 8px; border: 1px solid #ccc; min-height: 120px; }
    #canva-link { margin-top: 1em; display: block; font-size: 0.95em; color: #0073e6; text-decoration: underline; }
  </style>
</head>
<body>
  <h2>ğŸ§ª KaiJa GPT Playground</h2>
  <label for="gpt">WÃ¤hle einen GPT:</label>
  <select id="gpt">
    <option value="maerki-gpt">ğŸ§  MÃ¤rki GPT</option>
    <option value="kaija-gpt">ğŸ“£ KaiJa GPT</option>
    <option value="honey-gpt">ğŸ Honey GPT</option>
    <option value="homie-gpt">ğŸ“ Homie GPT</option>
    <option value="kaivio-gpt">ğŸ’¼ KaiVio GPT</option>
    <option value="baschis-gpt">ğŸ¤ Baschi GPT</option>
    <option value="soulguide-gabriela-gpt">ğŸŒ¿ Gabriela GPT</option>
    <option value="soulsyncai-gpt">ğŸŒ™ SoulSync AI</option>
    <option value="dailyjasmin-gpt">âœ¨ DailyJasmin</option>
  </select>

  <label for="prompt">Prompt eingeben:</label>
  <textarea id="prompt" rows="5" placeholder="Schreib mir 3 Tipps fÃ¼r meine Preisstrategieâ€¦"></textarea>

  <button onclick="sendPrompt()">ğŸš€ Anfrage senden</button>
  <button onclick="generateCanvaLink()">ğŸ¨ Canva Vorlage vorschlagen</button>

  <h3>ğŸ§  GPT Antwort</h3>
  <div id="output">Antwort erscheint hierâ€¦</div>
  <a id="canva-link" href="#" target="_blank" style="display:none;">â¡ï¸ Canva Vorlage Ã¶ffnen</a>

  <script>
    async function sendPrompt() {
      const gpt = document.getElementById('gpt').value;
      const prompt = document.getElementById('prompt').value;
      const output = document.getElementById('output');

      output.innerText = 'â³ Anfrage wird verarbeitetâ€¦';

      try {
        const res = await fetch('/api/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ gpt, messages: [{ role: 'user', content: prompt }] })
        });
        const data = await res.json();
        output.innerText = data?.choices?.[0]?.message?.content || 'âš ï¸ Keine Antwort erhalten.';
      } catch (err) {
        output.innerText = 'âŒ Fehler: ' + err.message;
      }
    }

    async function generateCanvaLink() {
      const prompt = document.getElementById('prompt').value;
      const linkEl = document.getElementById('canva-link');
      linkEl.innerText = 'â³ Canva-Link wird generiertâ€¦';
      linkEl.style.display = 'block';

      try {
        const res = await fetch('/api/canva-download', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ type: 'presentation', query: prompt })
        });
        const data = await res.json();
        linkEl.href = data.templateSearchUrl;
        linkEl.innerText = 'â¡ï¸ Canva Vorlage Ã¶ffnen';
      } catch (err) {
        linkEl.innerText = 'âŒ Fehler beim Generieren des Canva-Links';
      }
    }
  </script>
</body>
</html>
