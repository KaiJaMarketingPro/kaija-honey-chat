<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Willkommen bei Honey</title>
  <style>
    body {
      font-family: sans-serif;
      background: #eef2f7;
      padding: 2rem;
      color: #333;
    }
    .wrapper {
      background: #fff;
      max-width: 600px;
      margin: auto;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
    }
    input, button {
      margin: 0.5rem 0;
      padding: 0.6rem;
      width: 100%;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <h2>🥳 Willkommen bei Honey Signature!</h2>
    <p>Du hast dein Abo erfolgreich aktiviert. Jetzt kannst du loslegen – aber bitte bestätige vorher deine Einwilligung:</p>
    <form id="onboardingForm">
      <input type="email" id="email" placeholder="Deine E-Mail-Adresse" required />
      <label style="display: block; margin: 1rem 0;">
        <input type="checkbox" id="consentCheckbox" required />
        Ich willige ein, dass meine E-Mail-Adresse für den Empfang von Abo-bezogenen Informationen zu Honey GPT verarbeitet wird.
        Die Verarbeitung erfolgt auf Grundlage der <a href="/datenschutz" target="_blank">Datenschutzerklärung</a>.
      </label>
      <button type="submit">🔐 Zugang prüfen & starten</button>
    </form>
    <p style="margin-top:2rem; font-size:0.9em;">
      ❓ Fragen oder Probleme? Schreib uns an <a href="mailto:hello@kaija-marketing.pro">hello@kaija-marketing.pro</a>
    </p>
    <div id="status" style="margin-top: 1rem;"></div>
  </div>

  <script>
    document.getElementById("onboardingForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const consent = document.getElementById("consentCheckbox").checked;
      const email = document.getElementById("email").value.trim();
      const status = document.getElementById("status");

      if (!consent || !email) {
        status.textContent = "❌ Bitte bestätige deine Einwilligung und gib eine gültige E-Mail ein.";
        return;
      }

      try {
        await fetch("https://hook.eu2.make.com/7byhdo41nn7j2tm8x1yn06euqtp7y4r2", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            timestamp: new Date().toISOString(),
            email,
            consent: true,
            source: "onboarding.html",
            brevo_triggered: true
          })
        });

        status.innerHTML = "✅ Danke! Deine Einwilligung wurde gespeichert. GPT wird geladen…";
        setTimeout(() => window.location.href = "/gpt.html", 2000);
      } catch (err) {
        status.textContent = "❌ Fehler beim Senden. Bitte versuche es später erneut.";
      }
    });
  </script>
</body>
</html>
